# ğŸ—ï¸ Taste Tree System Architecture

> **Document Version**: 1.0.0
> **Last Updated**: 2026-02-05

## 1. System Overview (ê°œìš”)

**Taste Tree**ëŠ” ì‚¬ìš©ìì˜ ì¶”ì–µê³¼ ì·¨í–¥ì„ ëŒ€í™”ë¥¼ í†µí•´ ì¶”ì¶œí•˜ê³ , ì´ë¥¼ **Answer_Asset**ì´ë¼ëŠ” ì •í˜•í™”ëœ ë°ì´í„° ìì‚°ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” **AI Native Web Application**ì…ë‹ˆë‹¤.
ì´ í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ê¸°ìˆ  ëª©í‘œëŠ” **ë¹„ì •í˜• ìì—°ì–´ ë°ì´í„°ì˜ ìì‚°í™”(Assetization)** ë° **ì‚¬ìš©ì ì‹¬ë¦¬ ìƒíƒœì™€ ì—°ë™ëœ ë™ì  ë Œë”ë§(Dynamic Rendering)**ì…ë‹ˆë‹¤.

### ğŸŒŸ Key Technical Features
- **Hyper-Personalized Persona**: Google Gemini API ê¸°ë°˜ì˜ í˜ë¥´ì†Œë‚˜ íŠœë‹ (Psychological Novelist).
- **Dynamic Garden Rendering**: Sentiment & Environment Analysisë¥¼ í†µí•œ ì‹¤ì‹œê°„ Canvas ë Œë”ë§.
- **Assetization Protocol**: ëŒ€í™”ì˜ ê¹Šì´(Depth)ì™€ ì‹ ë¢°ë„(TrustScore)ë¥¼ ì •ëŸ‰í™”í•˜ì—¬ í† í° ë³´ìƒ ì‚°ì¶œ.

---

## 2. System Architecture

### 2.1 Tech Stack
| Category | Technology | Purpose |
|----------|------------|---------|
| **Frontend** | Next.js 15 (App Router) | Server-Side Rendering & Client interaction |
| **Styling** | Tailwind CSS | Pixel Art aesthetic implementation |
| **Visuals** | HTML5 Canvas API | Procedural generation of pixel art trees & weather |
| **AI Engine** | Google Gemini (1.5-flash) | NLU, Persona Management, Sentiment Analysis |
| **Sound** | Web Audio API | Real-time 8-bit sound synthesis (Oscillator) |
| **State** | React Hooks | Local state & Interaction management |

### 2.2 Data Flow Diagram (Mermaid)

```mermaid
graph TD
    User[User Input] -->|POST /api/chat| NextAPI[Next.js API Route]
    NextAPI -->|Context Injection| Gemini[Google Gemini API]
    
    subgraph AI Engine
        Gemini -->|Analysis| Sentiment[Sentiment Analysis]
        Gemini -->|Analysis| Trust[Trust Score Calculation]
        Gemini -->|Analysis| Env[Environment & Search Logic]
    end
    
    Gemini -->|JSON Response| Frontend[Client (CreatePage)]
    
    subgraph Frontend Logic
        Frontend -->|Render| Typewriter[Typewriter Effect]
        Frontend -->|Update State| Garden[Garden Canvas]
        Frontend -->|Synthesize| Audio[Sound Manager]
    end
    
    Frontend -->|Completion| Asset[Answer_Asset Creation]
    Asset -->|Store| LocalStorage[Local/Wallet Storage]
```

---

## 3. Core Algorithms

### 3.1 Trust Score Evaluation (ì‹ ë¢°ë„ ì‚°ì •)
AIëŠ” ì‚¬ìš©ìì˜ ë‹µë³€ì„ ë‹¨ìˆœ í…ìŠ¤íŠ¸ê°€ ì•„ë‹Œ 'ì§„ì •ì„±' ê¸°ì¤€ìœ¼ë¡œ í‰ê°€í•©ë‹ˆë‹¤.

- **Depth Factor (40%)**: ë‹µë³€ì˜ êµ¬ì²´ì„± ë° ê¸¸ì´. ("ì¢‹ì•˜ì–´" vs "ê·¸ë‚ ì˜ í–‡ì‚´ê³¼ ëƒ„ìƒˆê°€ ê¸°ì–µë‚˜")
- **Context Relevance (30%)**: ì§ˆë¬¸ ì˜ë„ì™€ì˜ ì¼ì¹˜ ì—¬ë¶€.
- **Consistency (30%)**: ì´ì „ ëŒ€í™” ë§¥ë½ê³¼ì˜ ë…¼ë¦¬ì  ì—°ê²°ì„±.

`Route.ts` ë‚´ì˜ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ê°€ ì´ë¥¼ 0.0~1.0 ì‚¬ì´ì˜ Float ê°’ìœ¼ë¡œ ì‚°ì¶œí•˜ë©°, ì´ëŠ” ìµœì¢… TASTE í† í° ë³´ìƒ ìˆ˜ëŸ‰ ê²°ì •ì˜ ê¸°ì¤€ì´ ë©ë‹ˆë‹¤.

### 3.2 Dynamic Environment Rendering
ì‚¬ìš©ìì˜ ê°ì • ìƒíƒœ(Sentiment)ëŠ” ì‹œê°ì  ë‚ ì”¨ì™€ ì‹œê°„ëŒ€ë¡œ ì§ê²°ë©ë‹ˆë‹¤.

| Sentiment Group | Weather | Time | Palette |
|-----------------|---------|------|---------|
| **Joy / Excitement** | Sunny | Day | Vibrant Green/Pink |
| **Nostalgia / Warmth** | Clear | Sunset | Orange/Brown |
| **Sorrow / Calm** | Rainy | Night | Blue/Deep Green |

---

## 4. Future Scalability (Roadmap)
í˜„ì¬ MVP ë‹¨ê³„ëŠ” LocalStorage ë° Mock APIë¥¼ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë‚˜, í–¥í›„ **Vibe Labs**ì™€ì˜ í˜‘ì—…ì„ í†µí•´ ë‹¤ìŒ ë‹¨ê³„ë¡œ í™•ì¥ ì˜ˆì •ì…ë‹ˆë‹¤.

1. **RAG (Retrieval-Augmented Generation)**: Vector DB ë„ì…ì„ í†µí•´ ì‚¬ìš©ìì˜ ê³¼ê±° ì·¨í–¥ ë°ì´í„°ë¥¼ ì¥ê¸° ê¸°ì–µìœ¼ë¡œ ì €ì¥.
2. **On-Chain Integration**: Trust Scoreë¥¼ ê¸°ë°˜ìœ¼ë¡œ Soulbound Token (SBT) ë°œí–‰.
3. **Immersive Audio**: Web Audio APIë¥¼ ë„˜ì–´ì„  Spatial Audio (ê³µê°„ ìŒí–¥) ì ìš©.

---
*Generated by Antigravity Team*
